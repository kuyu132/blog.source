---
title: 树莓派
date: 2020-03-28 20:48:36
tags:
---

树莓派4B
设置wifi

https://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html

修改树莓派配置
```
sudo raspi-config
```

开启ssh
启动树莓派配置-》5.Interface Options->P2 SSH
查看温度
/opt/vc/bin/vcgencmd measure_temp

查看磁盘信息
df -h


分析磁盘占用：ncdu

### nginx使用

启动和停止服务
sudo service nginx restart
sudo service nginx start
sudo service nginx stop

查看配置
nginx -t

默认配置和nginx.conf之间的区别
/etc/nginx/sites-available/default
/etc/nginx/nginx.conf


在nginx的配置文件中可以查看log日志文件位置
/var/log/nginx/access.log
/var/log/nginx/error.log

### 树莓派dashboard的配置

nginx配置文件：/etc/nginx/sites-available/default
```
location / {
                index  index.html index.htm index.php default.html default.htm default.php;
        }
 
        location ~ .*\.php(\/.*)*$ {
                #fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/var/run/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
                set $real_script_name $fastcgi_script_name;
                if ($fastcgi_script_name ~ "(.+?\.php)(/.*)") {
                        set $real_script_name $1;
                        set $path_info $2;
                }
                fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;
                fastcgi_param SCRIPT_NAME $real_script_name;
                fastcgi_param PATH_INFO $path_info;
        }

```

homeassistant
http://你的ip:8123/

关机
sudo shutdown -h now 或 sudo halt


npm
查看npm的配置：
查看重写的配置：npm config list
查看默认的配置：npm config ls -l; 默认位置在/usr/local
修改会默认的值：npm config set prefix="/usr/local"

安装nodejs
解压xz文件
tar xvJf node-v13.12.0-linux-x64.tar.xz


### gitlab使用

启动/停止/重启所有 gitlab 组件
gitlab-ctl start/stop/restart

生成配置并启动服务
gitlab-ctl reconfigure

实时查看所有日志
gitlab-ctl tail

主要配置文件目录
主配置文件: /etc/gitlab/gitlab.rb
文档根目录: /opt/gitlab
默认存储库位置: /var/opt/gitlab/git-data/repositories
Nginx配置文件: /var/opt/gitlab/nginx/conf/gitlab-http.conf
Postgresql数据目录: /var/opt/gitlab/postgresql/data

